subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS= as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), function(.) ./.$P13_POP)
paris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS= as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), function(x) x/.$P13_POP)
paris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS= as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), function(x) x/.$P13_POP)
df[,2]
View(paris)
paris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS= as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), function(x) x/.$P13_POP, "_pc")
paris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS= as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), function(x) x/.$P13_POP, cols="_pc")
paris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS= as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), function(x) x/.$P13_POP)
?? mutate_at
paris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS= as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), funs(pc=./P13_POP))
paris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS= as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), funs(pc=./P13_POP)) %>%
mutate_all(ifelse(is.nan(.), 0, .))
paris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS= as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), funs(pc=./P13_POP)) %>%
mutate_if(is.numeric, ifelse(is.nan(.), 0, .))
paris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS= as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), funs(pc=./P13_POP)) %>%
mutate_if(is.numeric, funs(ifelse(is.nan(.), 0, .)))
View(paris)
arrd <- iris %>%
select(COM, P13_POP, P13_POP0014:P13_POP75P) %>%
group_by(COM) %>%
summarise_all(funs(sum(.))) %>%
arrd <- iris %>%
select(COM, P13_POP, P13_POP0014:P13_POP75P) %>%
group_by(COM) %>%
summarise_all(funs(sum(.))) %>%
ungroup
iris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS = as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), funs(pc=./P13_POP)) %>%
mutate_if(is.numeric, funs(ifelse(is.nan(.), 0, .)))
arrd <- iris %>%
select(COM, P13_POP, P13_POP0014:P13_POP75P) %>%
group_by(COM) %>%
summarise_all(funs(sum(.))) %>%
ungroup
View(arrd)
arrd <- iris %>%
select(COM, P13_POP, P13_POP0014:P13_POP75P) %>%
group_by(COM) %>%
summarise_all(funs(sum(.))) %>%
ungroup %>%
mutate_at(vars(P13_POP0014:P13_POP75P), funs(pc=./P13_POP)) %>%
mutate_if(is.numeric, funs(ifelse(is.nan(.), 0, .)))
long <- arrd %>%
gather(key = COM, value = population_variable)
long <- arrd %>%
gather(key = population_variabe, value = value, -COM)
long <- arrd %>%
gather(key = population_variable, value = value, -COM)
wide <- long %>%
spread(key = population_variable, value = value)
iris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS = as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), funs(pc=./P13_POP)) %>%
mutate_if(is.numeric, funs(ifelse(is.nan(.), 0, .))) %>%
mutate(COM = substr(COM, 4, 5)) %>%
mutate(COM = paste0("Paris ", COM))
View(iris)
### installs if necessary and loads tidyverse and readxl
### readxl is a package which is part of the tidyverse but not part of the core tidyverse loaded with library("tidyverse")
list.of.packages <- c("tidyverse", "readxl", "sf")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages, repos = "http://cran.us.r-project.org")
invisible(lapply(list.of.packages, library, character.only = TRUE))
knitr::opts_chunk$set(echo = TRUE)
# knitr::opts_knit$set(root.dir = "/home/hannah/repos/introtor")
require("tidyverse")
require("readxl")
require("sf")
### installs if necessary and loads tidyverse and readxl
### readxl is a package which is part of the tidyverse but not part of the core tidyverse loaded with library("tidyverse")
list.of.packages <- c("tidyverse", "readxl", "sf")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages, repos = "http://cran.us.r-project.org")
invisible(lapply(list.of.packages, library, character.only = TRUE))
knitr::opts_chunk$set(echo = TRUE)
# knitr::opts_knit$set(root.dir = "/home/hannah/repos/introtor")
require("tidyverse")
require("readxl")
require("sf")
irisshp <- system.file("Data/iris/CONTOURS-IRIS.shp", package="sf")
irisshp <- st_read(irisshp)
irisshp <- system.file("Data/iris/CONTOURS-IRIS.shp", package="sf")
shp <- st_read(irisshp)
# irisshp <- system.file("Data/iris/CONTOURS-IRIS.shp", package="sf")
# shp <- st_read(irisshp)
read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS")
irisshp <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS")
irisshporig <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS")
irisshp <- irisshporig %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset(IRIS %in% iris$IRIS)
irisshporig <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS")
irisshp <- irisshporig %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset(IRIS %in% iris$IRIS) %>%
left_join(iris)
irisshporig <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS")
irisshp <- irisshporig %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset(IRIS %in% iris$IRIS) %>%
left_join(iris)
plot(iris)
irisshporig <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS")
irisshp <- irisshporig %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset(IRIS %in% iris$IRIS) %>%
left_join(iris)
plot(irisshp)
irisshporig <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS")
irisshp <- irisshporig %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset(IRIS %in% iris$IRIS)
popvar <- iris %>%
select(IRIS, P13_POP0014_pc:P13_POP75P_pc)
irisshp <- irisshp %>%
left_join(popvar, by="IRIS")
plot(irisshp)
popvar <- iris %>%
select(IRIS, P13_POP75P_pc)
irisshp <- irisshp %>%
left_join(popvar, by="IRIS")
plot(irisshp)
popvar <- iris %>%
select(IRIS, P13_POP75P_pc)
irisshp <- irisshp %>%
left_join(popvar, by="IRIS")
plot(irisshp)
popvar <- iris %>%
select(IRIS, P13_POP75P_pc)
iristoplot <- irisshp %>%
left_join(popvar, by="IRIS")
plot(iristoplot)
irisshporig <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS")
irisshp <- irisshporig %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset(IRIS %in% iris$IRIS)
popvar <- iris %>%
select(IRIS, P13_POP75P_pc)
iristoplot <- irisshp %>%
left_join(popvar, by="IRIS")
plot(iristoplot)
popvar <- iris %>%
select(IRIS, P13_POP75P_pc)
iristoplot <- irisshp %>%
left_join(popvar, by="IRIS") %>%
select(-IRIS)
plot(iristoplot)
irisshporig <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS")
irisshp <- irisshporig %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset(IRIS %in% iris$IRIS & iris$TYP_IRIS[iris$TYP_IRIS=="H"])
popvar <- iris %>%
select(IRIS, P13_POP75P_pc)
iristoplot <- irisshp %>%
left_join(popvar, by="IRIS") %>%
select(-IRIS)
plot(iristoplot)
View(iris)
iris$TYP_IRIS[iris$TYP_IRIS=="H"]
irisshporig <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS")
irisshp <- irisshporig %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset((IRIS %in% iris$IRIS) & (IRIS %in% iris$IRIS[iris$TYP_IRIS=="H"]))
popvar <- iris %>%
select(IRIS, P13_POP75P_pc)
iristoplot <- irisshp %>%
left_join(popvar, by="IRIS") %>%
select(-IRIS)
plot(iristoplot)
irisshporig <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS")
irisshp <- irisshporig %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset(IRIS %in% iris$IRIS)
# subset((IRIS %in% iris$IRIS) & (IRIS %in% iris$IRIS[iris$TYP_IRIS=="H"]))
popvar <- iris %>%
mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA))
select(IRIS, P13_POP75P_pc)
popvar <- iris %>%
mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA))
select(IRIS, P13_POP75P_pc)
iris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS = as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), funs(pc=./P13_POP)) %>%
mutate_if(is.numeric, funs(ifelse(is.nan(.), 0, .))) %>%
mutate(COM = substr(COM, 4, 5)) %>%
mutate(COM = paste0("Paris ", COM)) %>%
write_csv("Output/iris.csv") %>%
write_rds("Output/iris.rds")
arrd <- iris %>%
select(COM, P13_POP, P13_POP0014:P13_POP75P) %>%
group_by(COM) %>%
summarise_all(funs(sum(.))) %>%
ungroup %>%
mutate_at(vars(P13_POP0014:P13_POP75P), funs(pc=./P13_POP)) %>%
mutate_if(is.numeric, funs(ifelse(is.nan(.), 0, .))) %>%
write_csv("Output/arrd.csv") %>%
write_rds("Output/arrd.rds")
popvar <- iris %>%
mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA))
select(IRIS, P13_POP75P_pc)
popvar <- iris %>%
mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA)) %>%
select(IRIS, P13_POP75P_pc)
iristoplot <- irisshp %>%
left_join(popvar, by="IRIS") %>%
select(-IRIS)
plot(iristoplot)
popvar <- iris %>%
mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA)) %>%
select(IRIS, P13_POP75P_pc)
iristoplot <- irisshp %>%
left_join(popvar, by="IRIS") %>%
select(-IRIS)
pdf('Output/age.pdf')
plot(iristoplot)
dev.off()
popvar <- iris %>%
mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA)) %>%
select(IRIS, P13_POP75P_pc)
iristoplot <- irisshp %>%
left_join(popvar, by="IRIS") %>%
select(-IRIS)
plot(iristoplot)
dev.copy(pdf, 'Output/age.pdf')
dev.off()
irisshporig <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS") %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset(IRIS %in% iris$IRIS)
irisshp <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS") %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset(IRIS %in% iris$IRIS)
irisshp <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS") %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
subset(IRIS %in% iris$IRIS) %>%
right_join(iris, by="IRIS")
irisshp <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS") %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
# subset(IRIS %in% iris$IRIS) %>%
right_join(iris, by="IRIS")
irisshp <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS") %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
right_join(iris, by="IRIS")
irisshp <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS") %>%
select(-IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
right_join(iris, by="IRIS")
irisshp <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS") %>%
#select(-IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
right_join(iris, by="IRIS")
irisshp <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS") %>%
select(-IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
right_join(iris, by="IRIS")
irisshp <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS") %>%
select(CODE_IRIS) %>%
rename(IRIS=CODE_IRIS) %>%
right_join(iris, by="IRIS")
iristoplot <- irisshp %>%
mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA)) %>%
select(IRIS, P13_POP75P_pc)
plot(iristoplot)
### to save plot use these two lines
# dev.copy(pdf, 'Output/age.pdf')
# dev.off()
iristoplot <- irisshp %>%
mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA)) %>%
select(P13_POP75P_pc)
plot(iristoplot)
### to save plot use these two lines
# dev.copy(pdf, 'Output/age.pdf')
# dev.off()
iristoplot <- irisshp %>%
# mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA)) %>%
select(P13_POP75P_pc)
plot(iristoplot)
### to save plot use these two lines
# dev.copy(pdf, 'Output/age.pdf')
# dev.off()
dev.copy(pdf, 'Output/age.pdf')
dev.copy(pdf, 'Output/age.pdf')
dev.off()
iristoplot <- irisshp %>%
# mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA)) %>%
select(P13_POP75P_pc)
plot(iristoplot)
### to save plot use these two lines
dev.copy(pdf, 'Output/age.pdf')
dev.off()
iristoplot <- irisshp %>%
# mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA)) %>%  ### optional line to exclude IRISes with no or few inhabitants
select(P13_POP75P_pc)
plot(iristoplot)
### to save plot use these two lines
# dev.copy(pdf, 'Output/age.pdf')
# dev.off()
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements")
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(c_arinsee) %>%
rename(COM=c_arinsee) %>%
right_join(arrd, by="COM")
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(as.character(c_arinsee)) %>%
rename(COM=c_arinsee) %>%
right_join(arrd, by="COM")
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
right_join(arrd, by="COM")
irisshp <- read_sf(dsn = "Data/iris", layer = "CONTOURS-IRIS") %>%
select(IRIS=CODE_IRIS) %>%
right_join(iris, by="IRIS")
iristoplot <- irisshp %>%
# mutate(P13_POP75P_pc=ifelse(TYP_IRIS=="H", P13_POP75P_pc, NA)) %>%  ### optional line to exclude IRISes with no or few inhabitants
select(P13_POP75P_pc)
plot(iristoplot)
### to save plot use these two lines
# dev.copy(pdf, 'Output/age.pdf')
# dev.off()
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
right_join(arrd, by="COM")
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
right_join(arrd, by="COM") %>%
select(P13_POP75P_pc)
plot(arrdshp)
View(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements")
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
right_join(arrd, by="COM")
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
right_join(arrd, by="COM") %>%
select(P13_POP75P_pc)
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee)
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM))
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
right_join(arrd, by="COM")
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
right_join(arrd, by="COM") %>%
select(P13_POP75P_pc)
View(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
right_join(arrd, by="COM") %>%
select(P13_POP75P_pc)
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
right_join(arrd, by="COM")
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
right_join(arrd, by="COM") %>%
select(P13_POP)
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM))
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
right_join(arrd, by="COM")
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements")
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
left_join(arrd, by="COM") %>%
select(P13_POP)
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
left_join(arrd, by="COM") %>%
select(P13_POP75P_pc)
plot(arrdshp)
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
left_join(arrd, by="COM") %>%
select(P13_POP75P_pc)
iris <- df %>%
subset(DEP=="75") %>%
select(IRIS, COM, TYP_IRIS, P13_POP, P13_POP0014:P13_POP75P) %>%
mutate(TYP_IRIS = as.factor(TYP_IRIS)) %>%
mutate_at(vars(P13_POP0014:P13_POP75P), funs(pc=./P13_POP)) %>%
mutate_if(is.numeric, funs(ifelse(is.nan(.), 0, .))) %>%
mutate(name_arrd = substr(COM, 4, 5)) %>%
mutate(name_arrd = paste0("Paris ", name_arrd)) %>%
write_csv("Output/iris.csv") %>%
write_rds("Output/iris.rds")
arrd <- iris %>%
select(COM, P13_POP, P13_POP0014:P13_POP75P) %>%
group_by(COM) %>%
summarise_all(funs(sum(.))) %>%
ungroup %>%
mutate_at(vars(P13_POP0014:P13_POP75P), funs(pc=./P13_POP)) %>%
mutate_if(is.numeric, funs(ifelse(is.nan(.), 0, .))) %>%
write_csv("Output/arrd.csv") %>%
write_rds("Output/arrd.rds")
arrdshp <- read_sf(dsn = "Data/arrondissements", layer = "arrondissements") %>%
select(COM=c_arinsee) %>%
mutate(COM=as.character(COM)) %>%
left_join(arrd, by="COM") %>%
select(P13_POP75P_pc)
plot(arrdshp)
knitr::opts_chunk$set(echo = TRUE)
# knitr::opts_knit$set(root.dir = "/home/hannah/repos/introtor")
require("tidyverse")
require("sf")
require("DT")
iris <- readRDS("Output/iris.rds")
arrd <- readRDS("Output/arrd.rds")
datatable(iris)
install.packages("DT")
knitr::opts_chunk$set(echo = TRUE)
# knitr::opts_knit$set(root.dir = "/home/hannah/repos/introtor")
require("tidyverse")
require("sf")
require("DT")
iris <- readRDS("Output/iris.rds")
View(df)
df
knitr::opts_chunk$set(echo = TRUE)
# knitr::opts_knit$set(root.dir = "/home/hannah/repos/introtor")
require("tidyverse")
require("sf")
require("DT")
